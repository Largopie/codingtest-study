name: Notify Discord on Push
on:
  push:
    branches: [main]
    paths:
      - '**/*.md' # markdown íŒŒì¼ ë³€ê²½ì‹œì—ë§Œ ì‹¤í–‰

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2
        with:
          fetch-depth: 2 # ì´ì „ ì»¤ë°‹ê³¼ ë¹„êµí•˜ê¸° ìœ„í•´ í•„ìš”

      - name: Get changed files
        id: changed-files
        uses: tj-actions/changed-files@v35
        with:
          files: |
            **/*.md

      - name: Get Repository URL
        id: repository-url
        run: |
          echo "repository-url=https://github.com/${{ github.repository }}" >> "$GITHUB_OUTPUT"

      - name: Send Discord notification
        uses: Ilshidur/action-discord@master
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK_URL }}
        with:
          args: |
            ğŸ¯ ìƒˆë¡œìš´ ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤!
            ë³€ê²½ëœ íŒŒì¼: ${{ steps.changed-files.outputs.all_changed_files }}
            íŒŒì¼ ë§í¬: ${{ steps.repository-url.outputs.repository-url }}/blob/main/${{ steps.changed-files.outputs.all_changed_files }}
